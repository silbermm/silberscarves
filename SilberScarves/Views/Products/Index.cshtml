@model SilberScarves.Models.CustomerAndProducts

@{
    ViewBag.Title = "Scarves";
}



<h2>
    Scarves
    @if (HttpContext.Current.User.Identity.IsAuthenticated)
    {
        <span class="glyphicon glyphicon-shopping-cart"> </span> 
       
        <span class="label label-info"> 
        @if(@Model.Cart.Scarves == null) { 
            Html.Raw(0);
        }
        else
        {
            Html.Raw(@Model.Cart.Scarves.Count);
        } 
        </span>
    }
</h2>

@if (ViewBag.Error != null)
    {
<div class="alert alert-danger">
    <strong> Warning! </strong> @ViewBag.Error
</div>
    }

<div class="row" data-ng-controller="ProductsCtrl">
    @if (HttpContext.Current.User.Identity.IsAuthenticated && @Model.Customer.isAdmin)
    {
        @Html.ActionLink("Create a new Scarf", "Create", "Products"); <br />
    }
    @foreach(SilberScarves.Models.ScarfItem item in @Model.Scarves)
{
    
    <div class="col-md-4" >
        <div class="panel panel-info">
            <div class="panel-heading">
                <h3 class="panel-title">@item.name</h3>
            </div>
            <div class="panel-body">
                @item.description
                <br />               
            </div>
            <div class="panel-footer">
                @using (Html.BeginForm()) { 
                    
                    <input type="hidden" name="scarfId" value="@item.scarfId" />
                   <!-- <button data-ng-click="addToCart('@item.scarfId', '@item.name', '@item.description', '@item.price', 1)" class="btn btn-sm" type="submit"> <span class="glyphicon glyphicon-shopping-cart"></span> Add to cart</button>  -->
                    <button class="btn btn-sm" type="submit"> <span class="glyphicon glyphicon-shopping-cart"></span> Add to cart</button>
                    <span class="pull-right"> $@item.price </span>
                }
            </div>

        </div>
    </div>
        
}
</div>